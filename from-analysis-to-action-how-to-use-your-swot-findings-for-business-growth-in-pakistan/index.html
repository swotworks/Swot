<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SWOT</title><meta name="description" content="A SWOT analysis is more than just an exercise; it's a blueprint for strategic planning. The true value lies in how you use the information."><meta name="generator" content="Publii Open-Source CMS for Static Site"><script type="text/javascript" async src="https://www.googletagmanager.com/gtag/js?id="></script><script type="text/javascript">window.dataLayer = window.dataLayer || [];
				  function gtag(){dataLayer.push(arguments);}
				  gtag('js', new Date());
				  gtag('config', '' );</script><meta name="theme-color" content="#17181E" media="(prefers-color-scheme: dark)"><meta name="theme-color" content="#D73A42" media="(prefers-color-scheme: light)"><meta name="msapplication-navbutton-color" content="#D73A42"><meta name="apple-mobile-web-app-status-bar-style" content="#D73A42"><link rel="canonical" href="https://swot.works/from-analysis-to-action-how-to-use-your-swot-findings-for-business-growth-in-pakistan/"><link rel="alternate" type="application/atom+xml" href="https://swot.works/feed.xml" title="SWOT - RSS"><link rel="alternate" type="application/json" href="https://swot.works/feed.json" title="SWOT - JSON"><meta property="og:title" content="How to Use Your SWOT from Analysis to Action "><meta property="og:site_name" content="SWOT"><meta property="og:description" content="A SWOT analysis is more than just an exercise; it's a blueprint for strategic planning. The true value lies in how you use the information."><meta property="og:url" content="https://swot.works/from-analysis-to-action-how-to-use-your-swot-findings-for-business-growth-in-pakistan/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://swot.works/media/website/icons8-swot-analysis-50-3.png" type="image/png"><link rel="preload" href="https://swot.works/assets/dynamic/fonts/jetbrainsmono/jetbrainsmono.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="https://swot.works/assets/dynamic/fonts/jetbrainsmono/jetbrainsmono-italic.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://swot.works/assets/css/style.css?v=1ffee8ac5ffec673011fbb68a67807a0"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://swot.works/from-analysis-to-action-how-to-use-your-swot-findings-for-business-growth-in-pakistan/"},"headline":"How to Use Your SWOT from Analysis to Action ","datePublished":"2025-07-25T20:40+05:00","dateModified":"2025-07-26T13:54+05:00","description":"A SWOT analysis is more than just an exercise; it's a blueprint for strategic planning. The true value lies in how you use the information.","author":{"@type":"Person","name":"Muhammad Shoib","url":"https://swot.works/authors/muhammad-shoib/"},"publisher":{"@type":"Organization","name":"Muhammad Shoib"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><style>.extlink::after {
				background-color: currentColor;
				content: "";
				display: inline-block;
				height: 16px;
				margin-left: 5px;
				position: relative;
				top: 0px;
				width: 16px;
			}
		
					.extlink.extlink-icon-1::after {
						mask-image: url("data:image/svg+xml;utf8,<svg viewBox='0 0 24 24' fill='none' stroke='%23000000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'><path d='M15 3h6v6'/><path d='M10 14 21 3'/><path d='M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6'/></svg>");
						mask-repeat: no-repeat;
						mask-size: contain;
					}</style><style>.ti{fill:none;stroke-linecap:round;stroke-linejoin:round;vertical-align:middle}</style></head><body class="post-template"><div class="container container--center"><script type="text/javascript">var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/6884a5198beeee192b5d5f3a/1j1329r2j';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();</script><header class="header"><div class="header__logo"><a class="logo" href="https://swot.works/">SWOT</a></div><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li class="has-submenu"><a href="https://swot.works/portfolio/" target="_self" aria-haspopup="true">Mission</a><ul class="navbar__submenu level-2" aria-hidden="true"><li class="has-submenu"><a href="https://swot.works/my-startup-journey/" target="_self" aria-haspopup="true">Startup Journey</a><ul class="navbar__submenu level-3" aria-hidden="true"><li><a href="https://swot.works/client-journey/" target="_self">Client Journey</a></li></ul></li></ul></li><li class="has-submenu"><a href="https://swot.works/services-and-solutions/" target="_self" aria-haspopup="true">Services &amp; Solutions</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://swot.works/pricing-plans/" target="_self">Pricing Plans </a></li></ul></li><li><a href="https://swot.works/swot-on-boarding/" target="_self">SWOT On-boarding </a></li></ul></nav></header><main class="content"><article class="post"><header><h1 class="post__title">How to Use Your SWOT from Analysis to Action </h1><div class="post__meta"><time datetime="2025-07-25T20:40" class="post__date">July 25, 2025 </time><span class="post__author"><a href="https://swot.works/authors/muhammad-shoib/" class="feed__author">Muhammad Shoib</a></span></div><div class="post__tags"><a href="https://swot.works/tags/swot/" class="invert">SWOT</a></div></header><div class="post__entry"><h1>Findings for Business Growth in Pakistan</h1><p><strong><span class="selected">You've completed your SWOT analysis – </span></strong><em><strong><span class="selected">shabash!</span></strong></em><strong><span class="selected"> (well done!) – but now what?</span></strong><span class="selected"> Many small business owners in Pakistan identify their Strengths, Weaknesses, Opportunities, and Threats, but then struggle with how to turn those insights into real, tangible actions for growth. This post is your guide to moving from mere analysis to powerful implementation.</span></p><p><span class="selected">A </span><strong><span class="selected">SWOT analysis</span></strong><span class="selected"> is more than just an exercise; it's a blueprint for strategic planning. The true value lies in how you use the information to make informed decisions and propel your </span><em><span class="selected">karobar</span></em><span class="selected"> (business) forward. Let's dive into </span><strong><span class="selected">how to use SWOT analysis for business growth</span></strong><span class="selected"> and unlock your full potential.</span></p><h2><span class="selected">Recap: The Four Pillars of SWOT</span></h2><p><span class="selected">Before we strategize, a quick reminder of what each part of SWOT means:</span></p><ul><li><p><strong><span class="selected">Strengths:</span></strong><span class="selected"> What your business excels at internally.</span></p></li><li><p><strong><span class="selected">Weaknesses:</span></strong><span class="selected"> Internal areas that need improvement.</span></p></li><li><p><strong><span class="selected">Opportunities:</span></strong><span class="selected"> External factors you can leverage for growth.</span></p></li><li><p><strong><span class="selected">Threats:</span></strong><span class="selected"> External challenges that could harm your business.</span></p></li></ul><p><span class="selected">Now, let's explore </span><strong><span class="selected">swot strategy development</span></strong><span class="selected"> by combining these elements to form actionable plans. This is where you gain </span><strong><span class="selected">swot analysis actionable insights</span></strong><span class="selected">.</span></p><h2><span class="selected">Turning Insights into Strategy: The Power of Combination</span></h2><p><span class="selected">The magic of SWOT lies in combining the internal (Strengths, Weaknesses) with the external (Opportunities, Threats) to create specific strategies. This is the core of </span><strong><span class="selected">turning SWOT into action</span></strong><span class="selected">.</span></p><h3><span class="selected">1. Strengths-Opportunities (SO) Strategies: Leverage Your Advantages</span></h3><p><span class="selected">This is about using your internal strengths to take full advantage of external opportunities.</span></p><ul><li><p><strong><span class="selected">Think:</span></strong><span class="selected"> "How can we use what we're good at to seize new market trends or gaps?"</span></p></li><li><p><strong><span class="selected">Example:</span></strong><span class="selected"> If your strength is a strong local reputation and an opportunity is a growing demand for online services in your area, an SO strategy might be to launch a localized online ordering system, leveraging your trusted name. This is a key aspect of </span><strong><span class="selected">leveraging strengths opportunities</span></strong><span class="selected">.</span></p></li></ul><h3><span class="selected">2. Weaknesses-Opportunities (WO) Strategies: Overcome and Grow</span></h3><p><span class="selected">Here, you focus on addressing your internal weaknesses by taking advantage of external opportunities.</span></p><ul><li><p><strong><span class="selected">Think:</span></strong><span class="selected"> "How can an external trend help us fix what we're not good at?"</span></p></li><li><p><strong><span class="selected">Example:</span></strong><span class="selected"> If a weakness is outdated manual record-keeping and an opportunity is the availability of affordable, user-friendly digital tools, a WO strategy would be to adopt an online record-keeping system to improve efficiency. This helps overcome your </span><strong><span class="selected">swot weakness</span></strong><span class="selected"> by embracing an external positive.</span></p></li></ul><h3><span class="selected">3. Strengths-Threats (ST) Strategies: Defend with Your Best</span></h3><p><span class="selected">Use your strengths to minimize or counter external threats.</span></p><ul><li><p><strong><span class="selected">Think:</span></strong><span class="selected"> "How can our unique advantages protect us from potential dangers?"</span></p></li><li><p><strong><span class="selected">Example:</span></strong><span class="selected"> If your strength is excellent customer service and a threat is new, cheaper competitors, an ST strategy could be to emphasize your superior service and build stronger customer loyalty to retain your client base. This is about </span><strong><span class="selected">addressing weaknesses threats</span></strong><span class="selected"> proactively using your strengths.</span></p></li></ul><h3><span class="selected">4. Weaknesses-Threats (WT) Strategies: Minimize and Avoid</span></h3><p><span class="selected">This is the defensive strategy, aiming to reduce internal weaknesses to avoid or mitigate external threats.</span></p><ul><li><p><strong><span class="selected">Think:</span></strong><span class="selected"> "How can we fix our vulnerabilities to protect ourselves from dangers?"</span></p></li><li><p><strong><span class="selected">Example:</span></strong><span class="selected"> If a weakness is a limited marketing budget and a threat is aggressive advertising from a new competitor, a WT strategy might be to focus on highly targeted, low-cost digital marketing (like content marketing or WhatsApp outreach) to make the most of limited resources and avoid direct competition in expensive ad spaces. This is crucial for </span><strong><span class="selected">small business strategic planning Pakistan</span></strong><span class="selected">.</span></p></li></ul><h2><span class="selected">Practical Steps for Implementing Your SWOT Strategies</span></h2><p><span class="selected">Once you've identified your strategies, it's time for </span><strong><span class="selected">swot analysis implementation guide</span></strong><span class="selected"> steps:</span></p><ol><li><p><strong><span class="selected">Prioritize:</span></strong><span class="selected"> You can't do everything at once. Focus on 1-3 key strategies that will have the biggest impact.</span></p></li><li><p><strong><span class="selected">Develop Action Plans:</span></strong><span class="selected"> For each chosen strategy, outline specific steps, who is responsible, and a deadline.</span></p></li><li><p><strong><span class="selected">Allocate Resources:</span></strong><span class="selected"> Ensure you have the necessary time, money, and people to execute your plans.</span></p></li><li><p><strong><span class="selected">Monitor and Adjust:</span></strong><span class="selected"> Regularly review your progress. Are the strategies working? Do you need to make any adjustments? Business environments are dynamic, so your plans should be too. This ensures </span><strong><span class="selected">practical SWOT application</span></strong><span class="selected">.</span></p></li></ol><h2><span class="selected">Why This Matters for Pakistani Small Businesses</span></h2><p><span class="selected">In Pakistan's dynamic market, understanding and acting on your SWOT analysis is not just good practice – it's essential for survival and growth. Whether you're a startup or an established enterprise, these insights lead to better </span><strong><span class="selected">business growth strategies Pakistan</span></strong><span class="selected">. By systematically applying your SWOT findings, you can navigate challenges, seize opportunities, and build a more resilient and profitable business.</span></p><p><strong><span class="selected">Conclusion:</span></strong></p><p><span class="selected">Moving from a </span><strong><span class="selected">SWOT analysis</span></strong><span class="selected"> to actionable strategies is the critical step that transforms insights into real-world success. By thoughtfully combining your internal and external factors, you can create a clear path for your small business in Pakistan to thrive. Don't let your analysis sit on paper; put it into action!</span></p><p><strong><span class="selected">Ready to turn your business insights into growth?</span></strong><span class="selected"> Swot.works helps small businesses in Pakistan streamline their operations and make smarter decisions. Contact us to learn how we can support your growth journey!</span></p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on July 26, 2025</p><div class="post__share"><a href="https://api.whatsapp.com/send?text=How%20to%20Use%20Your%20SWOT%20from%20Analysis%20to%20Action%C2%A0 https%3A%2F%2Fswot.works%2Ffrom-analysis-to-action-how-to-use-your-swot-findings-for-business-growth-in-pakistan%2F" class="js-share invert whatsapp" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://swot.works/assets/svg/svg-map.svg#whatsapp"/></svg> <span>WhatsApp</span></a></div></footer><nav class="pagination"><div class="pagination__title"><span>Read other posts</span></div><div class="pagination__buttons"><a href="https://swot.works/swot-analysis-for-small-businesses-in-pakistan-your-blueprint-for-growth/" class="btn previous" rel="prev" aria-label="[MISSING TRANSLATION]:  SWOT Analysis for Small Businesses in Pakistan "><span class="btn__icon">←</span> <span class="btn__text">SWOT Analysis for Small Businesses in Pakistan</span> </a><a href="https://swot.works/common-record-keeping-challenges-for-small-businesses-in-pakistan-and-how-to-overcome-them/" class="btn next" rel="next" aria-label="[MISSING TRANSLATION]:  Common Record-Keeping Challenges for Small Businesses in Pakistan &amp; How to Overcome Them "><span class="btn__text">Common Record-Keeping Challenges for Small Businesses in Pakistan &amp; How to Overcome Them</span> <span class="btn__icon">→</span></a></div></nav></article><div class="post__comments"></div></main><footer class="footer"><div class="footer__inner"><div class="footer__copyright"><p>© 2025 All rights reserved. This website and its content are the property of the owner</p></div></div></footer></div><script defer="defer" src="https://swot.works/assets/js/scripts.min.js?v=c2232aa7558e9517946129d2a1b8c770"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'overlay',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script>(function() {
			var originalTitle = document.title;
			var timeout;
			document.addEventListener("visibilitychange", function() {
				if (document.hidden) {
					document.title = "👀 We miss you! Plz Come back!";
				} else {
					clearTimeout(timeout);
					document.title = "🎉 Welcome back!";
							setTimeout(function() {
								document.title = originalTitle;
							}, 2000);
				}
			});
		})();</script><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">Switch to Desktop Mode Please</div><div id="pcb-txt" class="pcb__txt">For a better viewing experience on All Devices please switch to desktop mode.</div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Got it</button></div></div></div><button class="pcb__badge" aria-label="Guide" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('🍪 Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('🍪 Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('🍪 Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && (!cbConfig.initialLsState || cbConfig.initialLsState.indexOf(allowedGroup) === -1)) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('🍪 GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('🍪 Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('🍪 Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>